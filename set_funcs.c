#include "stdafx.h"

#include <stdlib.h>

/***************************************************************************
***************************************************************************/
// 全局变量、类型定义



/***************************************************************************
***************************************************************************/
// extern变量
extern void(*pfun[100])(void);


/***************************************************************************
***************************************************************************/
// 函数声明
void reset_pfun(void);
void traverse_pfun(void);


/***************************************************************************
***************************************************************************/
// extern函数




/***************************************************************************
***************************************************************************/
// 函数定义


/*. BH------------------------------------------------------------------------
*	reset_fun()――――将函数指针数组pfun[100]复位，即将其所有元素置为NULL;
*
*
*	输入参数：
*			无
*
*	输出参数：
*			无
*
*. BH------------------------------------------------------------------------
*/
void reset_pfun(void)
{
	// 1. 声明函数指针的指针，指向pfun中的第一个元素：
	void(**ppf)(void) = NULL;
	int finishCount = 1;
	ppf = &pfun[0];


	// 2. 使用循环来将pfun中的所有元素都赋值为NULL;
	*ppf = NULL;
	while (finishCount<100)
	{
		ppf++;
		*ppf = NULL;
		finishCount++;
	}

}



/*. BH------------------------------------------------------------------------
*	traverse_pfun()――――遍历调用pfun中所有的非空函数指针。
*
*
*	输入参数：
*			无
*
*	输出参数：
*			无
*
*. BH------------------------------------------------------------------------
*/
void traverse_pfun(void)
{
	// 1. 声明函数指针的指针，指向pfun中的第一个元素：
	void(**ppf)(void) = NULL;
	int finishCount = 0;
	ppf = &pfun[0];


	// 2. 使用循环来逐个调用pfun中所有非空的函数指针：
	while ((*ppf != NULL) && (finishCount<99))
	{
		(**ppf)();
		ppf++;
		finishCount++;

	}

}



